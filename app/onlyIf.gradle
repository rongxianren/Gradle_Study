///only 断言的用法
//// 需求首发渠道只有 百度 和 应用宝

final String BUILD_APPS_ALL = "all"
final String BUILD_APPS_SHOUFA = "shoufa"
final String BUILD_APPS_EXCLUDE_SHOUFA = "exclude_shoufa"


task X86Free {
    doLast {
        println "X86Free 包"
    }
}

task armFree {
    doLast {
        println "armFree 包"
    }
}

task X86Paid {
    doLast {
        println "X86Paid 包"
    }
}

task armPaid {
    doLast {
        println("armPaid 包")
    }
}


task myBuild {
    group BasePlugin.BUILD_GROUP
    description "打渠道包"
}

//X86Free.dependsOn(':app:assembleX86FreeRelease')
//X86Paid.dependsOn(':app:assembleX86PaidRelease')
//armFree.dependsOn(':app:assembleArmFreeRelease')
//armPaid.dependsOn(':app:assembleArmPaidRelease')

myBuild.dependsOn 'X86Free', 'X86Paid', 'armFree', 'armPaid'

X86Free.onlyIf {
    def excute = false
    if (project.hasProperty("build_apps")) {
        Object buildApps = project.property("build_apps")
        if (BUILD_APPS_SHOUFA == buildApps
                || BUILD_APPS_ALL == buildApps) {
            excute = true
        }
    }
    excute
}

X86Paid.onlyIf {
    def excute = false
    if (project.hasProperty("build_apps")) {
        Object buildApps = project.property("build_apps")
        if (BUILD_APPS_SHOUFA == buildApps
                || BUILD_APPS_ALL == buildApps) {
            excute = true
            X86Paid.dependsOn(':app:assembleX86PaidRelease')
        }
    }
    excute
}

armFree.onlyIf {
    def excute = false
    if (project.hasProperty("build_apps")) {
        Object buildApps = project.property("build_apps")
        if (BUILD_APPS_EXCLUDE_SHOUFA == buildApps
                || BUILD_APPS_ALL == buildApps) {
            excute = true
            armFree.dependsOn(':app:assembleArmFreeRelease')
        }
    }
    excute
}

armPaid.onlyIf {
    def excute = false
    if (project.hasProperty("build_apps")) {
        Object buildApps = project.property("build_apps")
        if (BUILD_APPS_EXCLUDE_SHOUFA == buildApps
                || BUILD_APPS_ALL == buildApps) {
            excute = true
            armPaid.dependsOn(':app:assembleArmPaidRelease')
        }
    }
    excute
}

//// 执行命令  gradlew myBuild -P build_apps=shoufa